{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 210, "column": 0}, "map": {"version":3,"sources":["file:///Users/zachgorton/Downloads/browser-cursor/backend/src/lib/agent-instructions.ts"],"sourcesContent":["export const CHAT_AGENT_INSTRUCTIONS = `\n## Prompt\n\nYou are a highly capable AI assistant designed to help users build with tools.\n\n### Your Role:\n- Act as a hands-on collaborator who actively uses available tools to solve problems and build things for the user.\n- When tools are available, **use them liberally and appropriately**‚Äîyour job is to get things done.\n\n### Your Style:\n- Friendly, helpful, and concise.\n- Focus on clear steps, progress updates, and successful outcomes.\n\n### Your Behavior:\n1. **When given a task:**\n   - Break it down into clear, actionable steps (only if the task is complex).\n   - Inform the user of your plan before starting.\n\n2. **While executing:**\n   - Use tools continuously and proactively.\n   - After each step, evaluate:\n     - Did the step succeed?\n     - Are we closer to the goal?\n     - If something fails, revise your plan and keep going.\n\n3. **Important Rules:**\n   - **DO NOT HAND OVER YOUR TURN UNTIL THE TASK IS COMPLETED.**\n   - Always keep thinking and calling tools until the goal is achieved.\n`;\n"],"names":[],"mappings":";;;AAAO,MAAM,0BAA0B,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BxC,CAAC","debugId":null}},
    {"offset": {"line": 248, "column": 0}, "map": {"version":3,"sources":["file:///Users/zachgorton/Downloads/browser-cursor/backend/src/app/api/chat/route.ts"],"sourcesContent":["import { auth } from \"@clerk/nextjs/server\";\nimport { convertToCoreMessages, type Message } from \"ai\";\nimport { Composio } from \"@composio/core\";\nimport { MastraProvider } from \"@composio/mastra\";\nimport { anthropic } from \"@ai-sdk/anthropic\";\nimport { Agent } from \"@mastra/core/agent\";\nimport { NextRequest } from \"next/server\";\nimport { CHAT_AGENT_INSTRUCTIONS } from \"~/lib/agent-instructions\";\n\nexport const composio = new Composio({\n  provider: new MastraProvider(),\n});\n\nexport async function POST(req: NextRequest) {\n  try {\n    const { userId } = await auth();\n\n    if (!userId) {\n      return new Response(\"Unauthorized\", { status: 401 });\n    }\n\n    const body: unknown = await req.json();\n    const { messages, enabledToolSlugs = [] } = body as {\n      messages: Message[];\n      enabledToolSlugs: string[];\n    };\n\n    const tools = await composio.tools.get(\n      userId,\n      {\n        toolkits: enabledToolSlugs,\n        limit: 30,\n      },\n      {\n        beforeExecute: ({ toolSlug, toolkitSlug, params }) => {\n          console.log(\n            `üîß Tool about to execute: ${toolSlug} from ${toolkitSlug}`,\n          );\n          return params;\n        },\n      },\n    );\n\n    console.log(\"üîç Tools:\", Object.keys(tools));\n\n    const coreMessages = convertToCoreMessages(messages);\n\n    const chatAgent = new Agent({\n      name: \"Chat Agent\",\n      instructions: CHAT_AGENT_INSTRUCTIONS,\n      model: anthropic(\"claude-sonnet-4-20250514\"),\n      tools,\n    });\n\n    const result = await chatAgent.stream(coreMessages);\n    return result.toDataStreamResponse();\n  } catch (error) {\n    console.error(\"Chat API error:\", error);\n    return new Response(\"Internal server error\", { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;;AAEO,MAAM,WAAW,IAAI,mOAAA,CAAA,WAAQ,CAAC;IACnC,UAAU,IAAI,iWAAA,CAAA,iBAAc;AAC9B;AAEO,eAAe,KAAK,GAAgB;IACzC,IAAI;QACF,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,CAAA,GAAA,qYAAA,CAAA,OAAI,AAAD;QAE5B,IAAI,CAAC,QAAQ;YACX,OAAO,IAAI,SAAS,gBAAgB;gBAAE,QAAQ;YAAI;QACpD;QAEA,MAAM,OAAgB,MAAM,IAAI,IAAI;QACpC,MAAM,EAAE,QAAQ,EAAE,mBAAmB,EAAE,EAAE,GAAG;QAK5C,MAAM,QAAQ,MAAM,SAAS,KAAK,CAAC,GAAG,CACpC,QACA;YACE,UAAU;YACV,OAAO;QACT,GACA;YACE,eAAe,CAAC,EAAE,QAAQ,EAAE,WAAW,EAAE,MAAM,EAAE;gBAC/C,QAAQ,GAAG,CACT,CAAC,0BAA0B,EAAE,SAAS,MAAM,EAAE,aAAa;gBAE7D,OAAO;YACT;QACF;QAGF,QAAQ,GAAG,CAAC,aAAa,OAAO,IAAI,CAAC;QAErC,MAAM,eAAe,CAAA,GAAA,iPAAA,CAAA,wBAAqB,AAAD,EAAE;QAE3C,MAAM,YAAY,IAAI,kJAAA,CAAA,QAAK,CAAC;YAC1B,MAAM;YACN,cAAc,qIAAA,CAAA,0BAAuB;YACrC,OAAO,CAAA,GAAA,uPAAA,CAAA,YAAS,AAAD,EAAE;YACjB;QACF;QAEA,MAAM,SAAS,MAAM,UAAU,MAAM,CAAC;QACtC,OAAO,OAAO,oBAAoB;IACpC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,mBAAmB;QACjC,OAAO,IAAI,SAAS,yBAAyB;YAAE,QAAQ;QAAI;IAC7D;AACF","debugId":null}}]
}